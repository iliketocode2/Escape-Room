<!DOCTYPE html>
<html>
<head>
  <title>Room 1, Floor 1</title>
  <style>
  body {
    height: 100%;
    margin: 0;
    text-align: center;
  }
  .back{
    background-image: url("Images/cell.jpg");
    height: 100%;
  
    /* Center and scale the image*/
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
  }
  .rec {
    background: gray;
    border: 1px solid black;
    border-radius: 5px;
    height: 40px;
    width: 80px;
  }
  .console {
    width: 99%;
    height: 250px;
    background: skyblue;
    text-align: left;
    padding: 10px;
  }
  .itembar {
    width: 98%;
    height: 100px;
    border: 3px solid blue;
    border-radius: 5px;
    background: lightblue;
    margin-left: 10px;
    margin-right: 10px;
    display: flex;
    flex-wrap: wrap;
  }
  .itemslot {
    width: 75px;
    height: 75px;
    background: white;
    padding: 5px;
    margin: 10px;
  }

  .hidden {
    visibility: hidden;
  }
  </style>
</head>
<body>
  <div class="back">
    <img src="Images/window.png" alt="dungeon window" style="height:200px;width:200px;float:left;margin-left:200px;margin-top:100px;">
    <div class="rec" style="position: relative; top:500px; left:100px">
      <img src="Images/keyForm.png" alt="key" style="width:75px;height:35px;position: relative;top:-300px">
    </div>
    <img src="Images/window.png" alt="dungeon window" style="height:200px;width:200px;float:left;margin-left:300px;margin-top:100px;">
    
    <img src="Images/door.png" id="door" alt="door" style="height:400px;width:350px;">
    
    <img src="Images/torch.gif" id="torch" alt="dungeon window" style="height:200px;width:200px;float:left;margin-left:200px;" class="">
    
    <img src="Images/closedChest.png" id="chest" alt="treasure chest" style="height:150px;width:200px;position:relative;right:50px" onclick="openChest()">
    
    <img src="Images/handcuffs.png" id="cuffs" alt="handcuffs" style="height:80px;width:100px;position:relative;left:10px;" class="">
    
    <img src="Images/hay.png" alt="pile of hay" style="height:200px;width:400px;">
  </div>
  <div class="console">
    <h3 id="message">Goal:</h3>
    <br>
    <p>Items you have collected will appear below:</p>
    <div class="itembar">
      <div class="itemslot">
        <p>#1</p><img src="" id="0" width="100px" height="100px">
      </div>
      <div class="itemslot">
        <p>#2</p><img src="" id="1" width="100px" height="100px">
      </div>
      <div class="itemslot">
        <p>#3</p><img src="" id="2" width="100px" height="100px">
      </div>
    </div>
  </div>

  <script>
    //  localStorage.setItem('inv', JSON.stringify(inventory)); - save inventory
    //  JSON.parse(localStorage.getItem('inv'))

    inventory = []

    document.getElementById("torch").addEventListener("click", grabItem)
    document.getElementById("cuffs").addEventListener("click", grabItem)
    document.getElementById("key").addEventListener("click", grabItem)
    document.getElementById("chest").addEventListener("click", openChest)

    function grabItem(e) {
      item = e.srcElement.getAttribute("src")
      e.srcElement.classList.toggle("hidden")
      if (!inventory.includes(item)) {
        inventory.push(item)
        document.getElementById(inventory.indexOf(item).toString()).src = item
        localStorage.setItem('inv', JSON.stringify(inventory));
      }
    }
    
    function openChest(){
      var image = document.getElementById("chest").innerHTML;
      if (image.src.match("closedChest")) {
       image.src = "openChest.png";
      }
      else {
        image.src = "closedChest.png";
      }
    }
    
    //Basic messages format, we will have to change later
    var text = "messages will go here";
    document.getElementById("message").innerHTML = text;
   
  </script>
</body>
</html>
